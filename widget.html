<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Elev8Trades — Local Visibility Audit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin: 20px; line-height: 1.45; }
    .form { max-width: 860px; margin: 0 auto; }
    .row { margin: 12px 0; display: grid; gap: 6px; }
    .controls { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
    label { font-weight: 600; }
    input, select { padding: 8px 10px; border-radius: 8px; border: 1px solid #d1d5db; min-width: 260px; }
    button { padding: 10px 14px; border: 0; border-radius: 10px; background: #111827; color: white; cursor: pointer; }
    .out { max-width: 860px; margin: 18px auto; display: grid; gap: 10px; }
    .bar { height: 10px; background: #e5e7eb; border-radius: 6px; overflow: hidden; }
    .fill { height: 100%; width: 0%; background: #10b981; transition: width .4s ease; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap: 10px; }
    .card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    iframe { width: 100%; height: 300px; border: 0; border-radius: 12px; }
    .badge { font-size: 12px; padding: 2px 8px; border-radius: 999px; background:#e5e7eb; display:inline-block; }
    .clar-row { margin-top: 12px; display:none; }
    .clar-row.show { display:block; }
    .clar-row button { margin-right: 6px; margin-top: 6px; padding: 6px 10px; font-size: 14px; }
    .clar-hint { margin-top: 8px; font-style: italic; color: #6b7280; }
  </style>
</head>
<body>
  <div class="form">
    <h1>Elev8Trades — Local Visibility Audit</h1>

    <div class="row">
      <label for="bName">Business name</label>
      <input id="bName" placeholder="e.g., All State Home Improvement Inc." />
    </div>

    <div class="row">
      <label for="webUrl">Website (optional)</label>
      <input id="webUrl" placeholder="e.g., www.example.com" />
    </div>

    <div class="row">
      <div class="controls">
        <div>
          <label for="area">City/Area</label><br />
          <input id="area" placeholder="e.g., Hillside, NJ" />
        </div>
        <div>
          <label for="tradeSelect">Trade</label><br />
          <select id="tradeSelect">
            <option value="">Other</option>
            <option>Roofing</option>
            <option>Plumbing</option>
            <option>HVAC (Repair)</option>
            <option>HVAC (Install)</option>
            <option>Electrical</option>
            <option>Landscaping</option>
            <option>Masonry</option>
          </select>
        </div>
        <div>
          <label><input type="checkbox" id="fast" /> Fast test mode (skip site fetch)</label>
        </div>
      </div>
    </div>

    <div class="row controls">
      <button id="btnAnalyze">Analyze</button>
      <button id="btnCompetitors">Competitors</button>
      <button id="btnTop">Top</button>
    </div>
  </div>

  <div class="out">
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <strong>Overall</strong>
        <span class="badge mono" id="modeBadge">—</span>
      </div>
      <div class="bar"><div class="fill" id="overallBar"></div></div>
      <div class="mono" id="overallPct">—</div>
    </div>

    <div class="grid">
      <div class="card">
        <strong>SEO</strong>
        <div class="bar"><div class="fill" id="barSeo"></div></div>
        <div class="mono" id="valSeo">—</div>
      </div>
      <div class="card">
        <strong>CTA</strong>
        <div class="bar"><div class="fill" id="barCta"></div></div>
        <div class="mono" id="valCta">—</div>
      </div>
      <div class="card">
        <strong>GBP (Reviews)</strong>
        <div class="bar"><div class="fill" id="barGbp"></div></div>
        <div class="mono" id="valGbp">—</div>
      </div>
      <div class="card">
        <strong>Reviews Dial</strong>
        <div class="bar"><div class="fill" id="barReviews"></div></div>
        <div class="mono" id="valReviews">—</div>
      </div>
      <div class="card">
        <strong>Pain Dial</strong>
        <div class="bar"><div class="fill" id="barPain"></div></div>
        <div class="mono" id="valPain">—</div>
      </div>
    </div>

    <div class="card" id="mapEmbedWrap" style="display:none;">
      <strong>Map Preview</strong>
      <iframe id="mapEmbed" loading="lazy"></iframe>
    </div>

    <div class="card">
      <strong>Details</strong>
      <pre class="mono" id="details" style="white-space:pre-wrap;"></pre>

      <!-- CLARIFICATIONS UI -->
      <div id="clarWrap" class="clar-row">
        <p id="clarMsg" aria-live="polite" style="margin:8px 0; font-weight:600;"></p>
        <div id="clarList" style="display:flex; flex-wrap:wrap; gap:6px;"></div>
        <div class="clar-hint" id="clarHint"></div>
      </div>
    </div>

    <div class="card">
      <strong>Competitors</strong>
      <pre class="mono" id="competitors" style="white-space:pre-wrap;"></pre>
    </div>
  </div>

  <script>
    // If you host the widget on a different domain, set this before loading widget.js:
    // window.LVA_API_BASE = "https://elev8backend.onrender.com";
  </script>
  <script src="./widget.js"></script>
</body>
</html>
